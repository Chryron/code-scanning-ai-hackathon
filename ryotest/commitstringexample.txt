@@ -64,13 +64,6 @@ bool IsRepeatOne(const NodeDef& repeat_node, const MutableGraphView& graph) {
  return IsConstNodeWithValue(*graph.GetNode(repeat_node.input(1)), 1);
}

- bool IsPrefetchZero(const NodeDef& prefetch_node,
-                    const MutableGraphView& graph) {
-  if (prefetch_node.op() != "PrefetchDataset") return false;
-  // We are looking only for prefetch(0) nodes.
-  return IsConstNodeWithValue(*graph.GetNode(prefetch_node.input(1)), 0);
- }
- 
bool IsShardOne(const NodeDef& shard_node, const MutableGraphView& graph) {
  if (shard_node.op() != "ShardDataset") return false;
  // We are looking only for shard(0) nodes.


@@ -142,8 +135,7 @@ bool IsMapIdentity(const NodeDef& map_node, const MutableGraphView& graph,
bool IsNoOp(const NodeDef& node, const MutableGraphView& graph,
            const FunctionLibraryDefinition& function_library) {
  return IsTakeAll(node, graph) || IsSkipNone(node, graph) ||
-         IsRepeatOne(node, graph) || IsPrefetchZero(node, graph) ||
-         IsShardOne(node, graph) ||
+         IsRepeatOne(node, graph) || IsShardOne(node, graph) ||
          IsMapIdentity(node, graph, function_library);
}